function lab2rgb(r){var a,t,n,o=(r[0]+16)/116,s=r[1]/500+o,p=o-r[2]/200;return t=-.9689*(s=.95047*(s*s*s>.008856?s*s*s:(s-16/116)/7.787))+1.8758*(o=1*(o*o*o>.008856?o*o*o:(o-16/116)/7.787))+.0415*(p=1.08883*(p*p*p>.008856?p*p*p:(p-16/116)/7.787)),n=.0557*s+-.204*o+1.057*p,a=(a=3.2406*s+-1.5372*o+-.4986*p)>.0031308?1.055*Math.pow(a,1/2.4)-.055:12.92*a,t=t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*Math.max(0,Math.min(1,a)),255*Math.max(0,Math.min(1,t)),255*Math.max(0,Math.min(1,n))]}function rgb2lab(r,a,t){var n,o,s;a/=255,t/=255;return o=(.2126*(r=(r=r/255)>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.7152*(a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92)+.0722*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92))/1,s=(.0193*r+.1192*a+.9505*t)/1.08883,n=(n=(.4124*r+.3576*a+.1805*t)/.95047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116)-16,500*(n-o),200*(o-(s=s>.008856?Math.pow(s,1/3):7.787*s+16/116))]}function rgbToHsl(r,a,t){r/=255,a/=255,t/=255;var n,o,s=Math.max(r,a,t),p=Math.min(r,a,t),e=(s+p)/2;if(s==p)n=o=0;else{var i=s-p;switch(o=e>.5?i/(2-s-p):i/(s+p),s){case r:n=(a-t)/i+(a<t?6:0);break;case a:n=(t-r)/i+2;break;case t:n=(r-a)/i+4}n/=6}return[n,o,e]}function hslToRgb(r,a,t){var n,o,s;if(0==a)n=o=s=t;else{function p(r,a,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+6*(a-r)*t:t<.5?a:t<2/3?r+(a-r)*(2/3-t)*6:r}var e=t<.5?t*(1+a):t+a-t*a,i=2*t-e;n=p(i,e,r+1/3),o=p(i,e,r),s=p(i,e,r-1/3)}return[255*n,255*o,255*s]}var sqrt=Math.sqrt,pow=Math.pow,cos=Math.cos,atan2=Math.atan2,sin=Math.sin,abs=Math.abs,exp=Math.exp,PI=Math.PI;function ciede2000(r,a){var t=r[0],n=r[1],o=r[2],s=a[0],p=a[1],e=a[2],i=sqrt(pow(n,2)+pow(o,2)),h=sqrt(pow(p,2)+pow(e,2)),w=(i+h)/2,f=.5*(1-sqrt(pow(w,7)/(pow(w,7)+pow(25,7)))),u=(1+f)*n,M=(1+f)*p,c=sqrt(pow(u,2)+pow(o,2)),b=sqrt(pow(M,2)+pow(e,2)),d=hp_f(o,u),q=hp_f(e,M),v=s-t,_=b-c,m=dhp_f(i,h,d,q),x=2*sqrt(c*b)*sin(radians(m)/2),g=(t+s)/2,l=(c+b)/2,I=a_hp_f(i,h,d,q),P=1-.17*cos(radians(I-30))+.24*cos(radians(2*I))+.32*cos(radians(3*I+6))-.2*cos(radians(4*I-63)),k=30*exp(-pow((I-275)/25,2)),E=sqrt(pow(l,7)/(pow(l,7)+pow(25,7))),T=1+.015*pow(g-50,2)/sqrt(20+pow(g-50,2)),H=1+.045*l,R=1+.015*l*P,j=-2*E*sin(radians(2*k));return sqrt(pow(v/(1*T),2)+pow(_/(1*H),2)+pow(x/(1*R),2)+j*(_/(1*H))*(x/(1*R)))}function degrees(r){return r*(180/PI)}function radians(r){return r*(PI/180)}function hp_f(r,a){if(0===r&&0===a)return 0;var t=degrees(atan2(r,a));return t>=0?t:t+360}function dhp_f(r,a,t,n){if(r*a==0)return 0;if(abs(n-t)<=180)return n-t;if(n-t>180)return n-t-360;if(n-t<-180)return n-t+360;throw new Error}function a_hp_f(r,a,t,n){if(r*a==0)return t+n;if(abs(t-n)<=180)return(t+n)/2;if(abs(t-n)>180&&t+n<360)return(t+n+360)/2;if(abs(t-n)>180&&t+n>=360)return(t+n-360)/2;throw new Error}